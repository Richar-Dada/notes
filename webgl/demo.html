<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script src="./js/three.min.js"></script>
    <script src="./js/Projector.js"></script>
	<script src="./js/CanvasRenderer.js"></script>

    <script>
        var frustumSize = 1000;
        var scene, camera, renderer, stats;

        init()
        animate()
        function init(){
           container = document.createElement( 'div' );
            document.body.appendChild( container );

            var info = document.createElement( 'div' );
            info.style.position = 'absolute';
            info.style.top = '10px';
            info.style.width = '100%';
            info.style.textAlign = 'center';
            container.appendChild( info ); 

            var aspect = window.innerWidth / window.innerHeight;
            camera = new THREE.OrthographicCamera( frustumSize * aspect / - 2, frustumSize * aspect / 2, frustumSize / 2, frustumSize / - 2, 1, 2000 );
            camera.position.y = 400;

            scene = new THREE.Scene();
            scene.background = new THREE.Color( 0xf0f0f0 );

            // Grid
            var gridHelper = new THREE.GridHelper( 1000, 20 );
            scene.add( gridHelper );

            var geometry = new THREE.BoxBufferGeometry( 50, 50, 50 );
			var material = new THREE.MeshLambertMaterial( { color: 0xffffff, overdraw: 0.5 } );

            var cube = new THREE.Mesh( geometry, material );

            cube.position.x = 0
            cube.position.y = 0
            cube.position.z = 0

            scene.add(cube)

            var loader = new THREE.TextureLoader();
            loader.load( 'images/timg.jpg', function ( texture ) {
                var geometry = new THREE.BoxBufferGeometry( 200, 200, 200 );
                var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5 } );
                var mesh = new THREE.Mesh( geometry, material );
                scene.add( mesh );
            } );
            

            renderer = new THREE.CanvasRenderer();
            renderer.setPixelRatio( window.devicePixelRatio );
            renderer.setSize( window.innerWidth, window.innerHeight );
            container.appendChild( renderer.domElement );

            // stats = new Stats();
			// container.appendChild( stats.dom );

            window.addEventListener( 'resize', onWindowResize, false );
        }

        function onWindowResize() {

            var aspect = window.innerWidth / window.innerHeight;

            camera.left   = - frustumSize * aspect / 2;
            camera.right  =   frustumSize * aspect / 2;
            camera.top    =   frustumSize / 2;
            camera.bottom = - frustumSize / 2;

            camera.updateProjectionMatrix();

            renderer.setSize( window.innerWidth, window.innerHeight );

        }

        function animate() {

            requestAnimationFrame( animate );

            //stats.begin();
            render();
            //stats.end();

        }

        function render() {

            var timer = Date.now() * 0.0001;

            camera.position.x = 1 * 800;
            camera.position.z = 1 * 800;
            camera.lookAt( scene.position );

            renderer.render( scene, camera );

        }
    </script>
</body>
</html>